<main>
  <div class="container-fluid">
    <section>
      <div class="form-group">
        <h2>Create Item</h2>
        <form [formGroup]="createItemForm" (ngSubmit)="onSubmit()">

          <div class="row">
            <div class="col-lg-12">
              <label for="name">Name</label>
              <input type="text" formControlName="name" class="form-control"
                     id="name" required minlength="4">
              <div *ngIf="name.invalid && (name.dirty || name.touched)"
                   class="alert alert-danger">

                <div *ngIf="name.errors.required">
                  Name is required.
                </div>
                <div *ngIf="name.errors.minlength">
                  Name must be at least 4 characters long.
                </div>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-lg-12">
              <label for="inputDescription">Description</label>
              <textarea rows="4" class="form-control" #text formControlName="description" id="inputDescription"
                        maxlength="255" required (keyup)="myText = text.value">
              </textarea>
              <div class="float-end">
                <span>{{myText | countdown: 255}} / 255</span>
              </div>
              <div *ngIf="description.invalid && (description.dirty || description.touched)"
                   class="alert alert-danger">

                <div *ngIf="description.errors.required">
                  Description is required.
                </div>
                <div *ngIf="description.errors.maxlength">
                  Description must be less than 255 characters long.
                </div>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-md-3">
              <label for="inputPrice">Price</label>
              <div class="input-group">
                <span class="input-group-text">â‚¬</span>
                <input type="number" class="form-control" formControlName="price" id="inputPrice" min="0" required>
                <div *ngIf="price.invalid && (price.dirty || price.touched)"
                     class="alert alert-danger">

                  <div *ngIf="price.errors.required">
                    Price is required.
                  </div>
                  <div *ngIf="price.errors.min">
                    Price must be a positive number.
                  </div>
                </div>
              </div>
            </div>
            <div class="col-md-4">
              <label for="inputAmountOfStock">Amount of Stock</label>
              <input type="number" class="form-control" formControlName="amountOfStock"
                     id="inputAmountOfStock" min="0" required>
              <div *ngIf="amountOfStock.invalid && (amountOfStock.dirty || amountOfStock.touched)"
                   class="alert alert-danger">

                <div *ngIf="amountOfStock.errors.required">
                  Amount of stock is required.
                </div>
                <div *ngIf="amountOfStock.errors.min">
                  Amount of Stock must be a positive number.
                </div>
              </div>
            </div>
          </div>

          <div class="row my-5">
            <div class="d-grid gap-2 col-8">
              <button type="submit" class="btn btn-primary btn-lg btn" style="background: green">CREATE</button>
            </div>
            <div class="d-grid gap-2 col-4">
              <button type="reset" class="btn btn-light btn-lg btn-block" routerLink="/items">CANCEL</button>
            </div>
          </div>
        </form>
      </div>
    </section>
  </div>
</main>
